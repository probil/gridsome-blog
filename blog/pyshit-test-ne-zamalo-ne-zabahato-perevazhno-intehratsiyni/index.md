---
title: Пишіть тести. Не забагато. Не замало. Переважно інтеграційні
date: 2020-07-15
summary: 
tags: ['тестування', 'Jest', 'архітектура', 'абстракція']
originalArticle:
    url: https://kentcdodds.com/blog/write-tests
    title: Write tests. Not too many. Mostly integration.
    author: Kent C. Dodds
cover:
    file: ./images/banner.jpg
    author: Elena Cordery
    authorLink: https://unsplash.com/photos/RLlcbkemwnw
---

Я робив доповідь на основі цієї публікації яку можна подивитись тут:

https://youtu.be/Fha2bVoC8SE

Нещодавно, Ґільєрмо Рауч (творець Socket.io та засновник Zeit.co (компанії що стоїть за масою вражаючих речей що виходили останнім часом)) [твітнув щось фундаментальне](https://twitter.com/rauchg/status/807626710350839808):

https://twitter.com/rauchg/status/807626710350839808

> Пишіть тести. Не замало. Не забагато. Переважно інтеграційні

Це глибоко, хоч і коротко, отже вйо до деталей:

## Пишіть тести

Так, для більшості проєктів вам слід писати автоматичні тести. Слід, якщо ви хоч трохи цінуєте свій час. Набагато краще спіймати ваду локально тестами ніж приймати дзвінок о 2:00 ранку і тоді виправляти її. **Я відчуваю що економлю час коли працюю над написанням тестів.** Це може зайняти або ж не займати більше часу аніж розробка, проте я (та інші) майже напевно заощаджуватимуть час підтримуючи їх.

Річ, про яку потрібно замислюватись коли пишете тести, це скільки впевненості вони надають вам в те що проєкт не містить вад. Статична типізація та інструменти підсвічування помилок кшталту [TypeScript](https://www.typescriptlang.org/) або [ESLint](https://eslint.org/) можуть дати вам неабиякий рівень упевненості і якщо ви не користуєтесь цими інструментами я дуже раджу поглянути до них. Однак, **навіть строго типізовані мови повинні мати тести**. Типізація та підсвічування помилок не можуть гарантувати що ваша бізнес-логіка не містить вад. Таким чином, ви все ще можете серйозно підвищити свою впевненість за допомогою хорошого набору тестів.

## Не забагато

Я чув, що менеджери та команди вимагають 100%-ве покриття коду тестам. Це дуже погана ідея. Проблема полягає в тому що **віддача від тестів спадає як тільки покриття перевищує 70%** (Я видумав це число... жодного наукового підґрунтя в ньому нема). Чому так? Ну коли ви прагнете до 100% увесь час то виявляєте, що проводите час тестуючи речі які насправді тестувати не потрібно. Речей які фактично взагалі не містять логіки (а отже будь-які вади можуть спіймати ESLint та Flow). *Підтримування таких тестів дійсно дуже сповільнює вас та вашу команду.*

Ви також можете виявити що тестуєте деталі реалізації тільки для того щоб отримати цей один рядок код що складно відтворити в тестовому середовищі. Вам *дійсно* варто уникати тестування деталей реалізації тому що воно не дає вам багато впевненості у тому що ваш додаток працює і до того ж це сповільнює рефакторинг. **Тести мають мінятись напрочуд рідко коли виконується рефакторинг.**

Слід зазначити, що майже всі мої проєкти з відкритим кодом мають 100%-ве покриття тестами. Це тому, що більшість з них є меншими бібліотеками та інструментами, які можна пере-використовувати у багатьох різних ситуаціях (злам може спричинити серйозну проблему у багатьох проектах користувачів), та й у всякому разі покриття у 100% відносно легко отримати.

## Переважно інтеграційні
